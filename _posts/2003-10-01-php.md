---
layout: post
title: php
categories: [php]
tags: [php]
fullview: false
---

## php  
1. [개요](#php)  
1. [기본문법](#basic)  
1. [다중 라인](#multi-line)  
1. [숫자와 문자](#number-string)  
1. [연산자](#operator)  
1. [변수와 상수](#variable)  
1. [데이터 형 검사 및 변경](#data-type)  
1. [get 그리고 post](#get_post)  
1. [함수](#function)  
1. [include and require](#include_require)  

### <a href="#" name="php">개요</a>  
서버 사이드 언어이다.  
대부분의 데이터베이스를 지원한다.  
[공식 홈페이지](http://php.net/), [국내 커뮤니티](http://phpschool.com/), [manual](http://www.php.net/manual/kr/langref.php)  

### <a href="#" name="basic">기본문법</a>  
    
    {% highlight php %}
    <?  // bad
    echo "hello world";
    ?>
    
    <?php  // good
    echo "hello world";
    ?>
    
    <?php
    // 한줄 주석
    
    /*
    다중 주석
    */
    
    // 명령어는 세미 콜론으로 끝난다.
    echo "hi";
    
    // '$'' 심볼은 모든 변수 앞에 붙는다.
    $num = 1;
    
    // 변수 네이밍 규칙
    /*
    - 변수의 시작은 알파벳이나 밑줄(_) 로 시작
    - 변수의 이름에는 알파벳과 숫자, 밑줄만 사용 가능
    - 변수 이름에는 공백 포함 불가능
    - 대소문자 구분
    */
    ?>
    {% endhighlight %}
		
	{% highlight php %}
    <?php
    echo "hello world<br>";	// echo는 하나 이상의 문자열을 출력하며 php 구조에 포함된다.  
	print_r "hello world";	// 매개 변수를 포함하는 함수이다.  
	
	// 일반적인 텍스트 출력시 함수가 아닌 echo 명령이 조금더 빠르다.  
    ?>
    {% endhighlight %}
	
### <a href="#" name="multi-line">다중 라인</a>  
		
	{% highlight php %}
	<?php
	// 다중라인
	echo 'abcde

	ffffffff
	sdfsdf<br>';

	// 다중라인
	$text = 'abcsd

	sdfsdfwesd
	fsdfsefsdf';

	echo $text.'<br>';

	// 다중라인
	$data = <<< _END

	abcdsd11112f
	sdfsef2222sdf
			sdfsd3333fsdf
	sdfsf444esdf

	_END;
	echo $data;
	?>
	{% endhighlight %}

### <a href="#" name="number-string">숫자와 문자</a>  
    
    {% highlight php %}
	<?php
	// is_numeric() 함수는 숫자인지 구별한다.
	$nNum = is_numeric('asd');
	if($nNum){
		echo "number";
	}else{
		echo "string";
	}

	echo 3 + 1;  // 4
	
	echo 3 * 1;  // 3
	
	echo 4 / 2;  // 2
	
	echo var_dump(6);  // int(6)
	
	echo var_dump(6.1);  // float(6.1)
	
	echo var_dump(1234);  // int(1234)
	
	echo var_dump('1234');  // string(4) "1234"
	
	echo 'hello'.'world';  // helloworld => 문자를 결합할 경우 '+' 가 아닌 '.'을 사용한다.
	
	echo "가나다\"라마바\"";  // 쌍따옴표 내에서 쌍따옴표 사용하기 (역슬래시)
	
	echo '가나다\'라마바\'';  // 따옴표 내에서 따옴표 사용하기 (역슬래시)
	?>
    {% endhighlight %}
### <a href="#" name="operator">연산자</a>  
    
	{% highlight php %}
	<?php
	echo 6+2;  // 8

	$count = 1;
	$count += 1;  // 2

	$a = 1;
	$b = 2;
	$c = 3;
	if($a > $b){}
	if($a > $b && $a > $c){}

	$j = 15;
	$j += 15;  // $j = $j + 15
	$j -= 15;  // $j = $j - 15
	$j *= 15;  // $j = $j * 15
	$j /= 15;  // $j = $j / 15
	$j %= 15;  // $j = $j % 15
	$j .= $k;  // $j = $j.$k

	$nNum = 1;
	$sNum = '1';
	echo $nNum == $sNum;  // boolean : true
	echo $nNum === $sNum;  // boolean : false, 타입 까지 비교하기 때문에 false를 반환한다.
	?>
    {% endhighlight %}
논리 연산자 중 xor 연산자는 조금 특이하다.  
두 개 중 하나의 값이 참이면 TRUE, 두 값 모두 참이거나 거짓이면 FALSE를 반환한다.  
    
    {% highlight php %}
	<?php
	$a = '1';
	$c = $a xor $b;
	echo $c;  // 1
	?>
    {% endhighlight %}
### <a href="#" name="variable">변수와 상수</a>  
변수는 항상 변할 수 있는 값이며, 상수는 변하지 않는 값이다.  
    
	{% highlight php %}
	<?php
	$a = 'Hello';
	$b = 'World';
	echo $a.$b;  // Hello World

	$c = 'abc'\d';
	echo $c;  // adc'd

	// 상수를 정의할 때는 define을 사용한다.
	define('title', 'value');
	echo title;  // value
	define('title', 'abcde');
	echo title;  // 오류 문구

	// 가변 변수
	$title = 'title2';
	$$title = 'php';
	echo $title2;  // php
	?>
    {% endhighlight %}
### <a href="#" name="data-type">데이터 형 검사 및 변경</a>  
    
	{% highlight php %}
	<?php
	$a = 10;
	echo gettype($a);  // integer

	settype($a, 'double');
	echo gettype($a);  // double
	?>
    {% endhighlight %}
### <a href="#" name="get_post">get 그리고 post</a>  
데이터 전송시 get방식과 post방식의 차이는 대부분 알고 있을 것으로 생각한다.  
get방식은 url에 데이터를 포함하고 post방식은 url에 노출하지 않고 전송할 수 있다.  

php 예시
    
	{% highlight php %}
	<?php
	// url : http://www.........php?id=abcde
	$getId = $_GET['id'];
	echo $getId;  // abcde

	// url : http://www.........php?id=abcde&password=12345
	$getId = $_GET['id'];
	$getPassword = $_GET['password'];
	echo $getId.','.$getPassword;  // abcde,12345
	?>
    {% endhighlight %}
post방식으로 id, password 전송
    
    {% highlight html %}
	<html>
	<body>
		<form method="POST" action="info.php">
		id :  <input type="text" name="id" />
		password :  <input type="text" name="password" />
		<input type="submit" />
		</form>
	</body>
	</html>
    {% endhighlight %}
post방식으로 id, paddword 받기
    
    {% highlight php %}
	<?php
	echo $_POST['id'].','.$_POST['password'];
	?>
    {% endhighlight %}  
		
### <a href="#" name="function">함수</a>  
함수의 이름은 대소문자를 구분하지 않는다.  
		
	{% highlight php %}
	<?php
	function longdate($timestamp){
		return date(‘1 F jS Y’,$timestamp);
	}
	echo longdate(time());
	echo '<br>';
	
	// 지역 변수
	function localVar(){
		// 함수 내에서 정의되어 사용된다.  
		// 함수 밖에서 값을 얻지 못한다.  
		// 함수가 끝났을 때 변수는 사라진다.  
		$temp = 'test';
	}

	// 전역 변수 - global
	// 모든 코드에서 접근 가능하다.  
	global $is_logged_in;

	// 고정 변수 - static
	function staticvar(){
		// 지역 변수는 함수가 끝나면 사라지지만, 고정 변수는는 함수가 호출될 때마다다 그 값을 유지하고 싶을 경우 사용한다.  
		static $int = 0;
		static $int = 1;
		// static $int = 1 + 2; 해석 불가 오류 발생
		echo $int;
	}
	staticvar();  // 1
	echo '<br>';

	// 슈퍼 전역 변수
	$GLOBALS;  // 현재 스크립트의 전역 범위 안에 정의된 모든 변수, 변수 이름은 배열의 키                
	$x = 10;
	$y = 20;
	echo $GLOBALS['z'] = $GLOBALS['x'] + $GLOBALS['y'];
	echo '<br>';

	$_SERVER;  // 헤더, 패스, 스크립트 위치 등에 관한 정보, 이 배열의 엔트리는 웹 서버가 만들지만 모든 웹 서버가 동일하게 일부나 전체 정보를 제공하리라는 보장은 없다.
	echo $_SERVER['PHP_SELF'];
	echo '<br>';
	echo $_SERVER['SERVER_NAME'];
	echo '<br>';
	echo $_SERVER['HTTP_HOST'];
	echo '<br>';
	echo $_SERVER['HTTP_REFERRER'];
	echo '<br>';
	echo $_SERVER['HTTP_USER_AGENT'];
	echo '<br>';
	echo $_SERVER['SCRIPT_NAME'];
	echo '<br>';

	$_REQUEST;  // // 브라우저에서 전달되는 정보 내용, 기본적으로 $_GET, $_POST, $_COOKIE
	$name = $_REQUEST['fname']; 
	echo $name;
	
	// 슈퍼 전역 변수를 사용하기 전에 항상 안전한지 확인해야 한다.  
	// htmlentities 함수를 사용하면 `<, >` 는 각각 `&lt;, &gt;`로 변환된다.  
	$came_from = htmlentities($_SERVER['HTTP_REFERRER']);
	?>

	<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
	Name: <input type="text" name="fname">
	<input type="submit">
	</form>

	<hr>

	<?php
	echo strrev('abcd');  // 문자열 반전
	echo '<br>';
	echo str_repeat('abcdefg,',3);  // 문자열 반복
	echo '<br>';
	echo strtoupper('abcd');  // 대문자로 변환
	echo '<br>';
	?>

	<?php
	// 첫번째 문자 대문자 + 모든 문자 소문자  
	echo fix_name('abc','def','ghi');
	function fix_name($name1, $name2, $name3){
		$name1 = ucfirst(strtolower($name1));
		return $name1;
	}
	echo '<br>';
	?>

	<?php
	$a = 'abc';
	$b = 'def';
	$c = 'ggg';
	echo $a . $b . $c.'<br>';

	fix_name2($a, $b, $c);
	function fix_name2(&$n1, &$n2, &$n3){
		$n1 = ucfirst(strtolower($n1));
		$n2 = ucfirst(strtolower($n2));
		$n3 = ucfirst(strtolower($n3));
	}
	echo $a . $b . $c.'<br>';
	?>
	<?php
	// 기타 함수
	print("php is...");
	print(abs(5-8));	// // 5-8 연산 -> abs 함수로 -3을 3으로 변환 -> 결과를 문자열로 변환 후 결과 출력  
	phpinfo();  // PHP 설치와 관련해 많은 정보를 보여준다.  
	phpversion();  // php 버전 확인  
	print_r();  // 사람이 읽기 편한 형태로 정보를 출력하라고 명령한다.  
	var_dump();  // 변수에 관한 정보(형, 값)에 관한 정보를 사람이 읽기 쉽게 출력해 준다.  
	?>
	{% endhighlight %}  
	
### <a href="#" name="include_require">include and require</a>  
#### include  
특정 파일을을 가져와서 모든 내용을 로드하라고 명령할 수 있다.  
		
	{% highlight php %}  
	include 'multiple_line.php';  
	include_once 'multiple_line.php';  // include 로 동일한 파일이 여러번 로드되는 것을 방지할 수 있다. _once()가 붙으면 한번만 실행한다는 의미이다.  
	{% endhighlight %}  
	
#### require  
무조건 파일을 로드하는 명령이다.  
아래 코드에서 else 문은 실행되지 않으나 require 명령이 있기 때문에 b.php 도 로드하게 된다.  
		
	{% highlight php %}  
	$num = 0;
	if($num == 0){
		include "multiple_line.php";
	}else{
		require "b.php";
		require_once "multiple_line.php";  // _once()가 붙으면 한번만 실행한다는 의미이다.
	}
	{% endhighlight %}  
	
